(this["webpackJsonpreact-mqtt-ws-client"]=this["webpackJsonpreact-mqtt-ws-client"]||[]).push([[0],{103:function(e,t){t.zhTW={props:{MuiBreadcrumbs:{expandText:"\u986f\u793a\u8def\u5f91"},MuiTablePagination:{backIconButtonText:"\u4e0a\u4e00\u9801",labelRowsPerPage:"\u6bcf\u9801\u7b46\u6578\uff1a",labelDisplayedRows:function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n,"  \u5171").concat(-1!==r?r:"\u5927\u65bc ".concat(n))},nextIconButtonText:"\u4e0b\u4e00\u9801"},MuiRating:{getLabelText:function(e){return"".concat(e,"\u661f")},emptyLabelText:"\u7121"},MuiAutocomplete:{clearText:"\u6e05\u9664",closeText:"\u95dc\u9589",loadingText:"\u8f09\u5165\u4e2d\u2026",noOptionsText:"\u7121\u9078\u9805",openText:"\u958b\u555f"},MuiAlert:{closeText:"\u95dc\u9589"},MuiPagination:{"aria-label":"\u5206\u9801\u5c0e\u89bd",getItemAriaLabel:function(e,t,n){return"page"===e?"\u7b2c".concat(t,"\u9801"):"first"===e?"\u7b2c\u4e00\u9801":"last"===e?"\u6700\u5f8c\u4e00\u9801":"next"===e?"\u4e0b\u4e00\u9801":"previous"===e?"\u4e0a\u4e00\u9801":void 0}}},text:{MuiMqttCommon:{connect:"\u9023\u7dda",disconnect:"\u4e2d\u65b7\u9023\u7dda",subscribe:"\u8a02\u95b1",unsubscribe:"\u53d6\u6d88\u8a02\u95b1",publish:"\u767c\u5e03"},MuiConfigActions:{settings:"\u8a2d\u5b9a"}}}},104:function(e,t){t.enUS={}},114:function(e,t,n){e.exports=n(227)},119:function(e,t,n){},122:function(e,t){},124:function(e,t){},193:function(e,t){},195:function(e,t){},217:function(e,t){},218:function(e,t){},227:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"zhTW",(function(){return ee.zhTW})),n.d(r,"enUS",(function(){return te.enUS}));var c=n(0),a=n.n(c),o=n(54),s=n.n(o);n(119),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(5),i=n(32),l=n(52),b=n(3),d=n(29),p=n.n(d),f=(n(102),"mwc".endsWith("-")?"mwc":"mwc-");function m(e,t){var n=f+e,r=Object(c.useState)((function(){var e=localStorage.getItem(n);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),a=Object(u.a)(r,2),o=a[0],s=a[1];return Object(c.useEffect)((function(){localStorage.setItem(n,JSON.stringify(o))}),[n,o]),[o,s]}var g=n(6);function h(e){var t=e.children,n=m("mqttSetting",{url:"https:"===window.location.protocol?"wss://":"ws://",clientId:"mqtt-ws-client-".concat(Date.now().toString(36)),anomynous:!1,username:"",password:"",topic:["",0],subscribeTo:{topic:"",qos:0,converter:"default"},publishTo:{topic:"",qos:0},locale:"zhTW"}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(g.d.Provider,{value:[c,o]},t)}var v=n(58),T="init",O="connect",j="subscribe",y="subscribed",q="unsubscribe",w="unsubscribed",x="publish",E="disconnect",S="onConnect",A="onReconnect",C="onClose",k="onOffline",M="onError",P="onMessage",D="updateStatus",I="updateMessages",F="togglePause",R=[{messages:[]}],W=null,L=null,z=function(e,t){switch(t.type){case P:var n=R.length-1;return R[n].messages.push(v.c[e.subscribedTo.converter](t)),W||e.pause||(W=setTimeout((function(){return e.dispatch({type:I})}),e.updateInterval)),e;case I:R.push({messages:[]}),W=null;var r=R[0].messages;return R.shift(),Object(b.a)({},e,{messages:[].concat(Object(l.a)(e.messages),Object(l.a)(r)),messagesCount:e.messagesCount+r.length});case T:return Object(b.a)({},e,{dispatch:t.dispatch});case O:e.mqtt&&e.mqtt.connected&&e.mqtt.end();var c=t.setting;try{var a=p.a.connect(c.url,Object(b.a)({},c,{username:c.anonymous?void 0:c.username,password:c.anonymous?void 0:c.password,reconnectPeriod:0}));return a.on("connect",(function(){return e.dispatch({type:S,status:"connected"})})),a.on("reconnect",(function(){return e.dispatch({type:A,status:"reconnecting"})})),a.on("close",(function(){return e.dispatch({type:C,status:"closed"})})),a.on("offline",(function(){return e.dispatch({type:k,status:"offline"})})),a.on("error",(function(t){return e.dispatch({type:M,error:t})})),a.on("message",(function(t,n,r){return e.dispatch({type:P,topic:t,message:n,packet:r})})),e.setAlert(["info","Connecting to ".concat(c.url,"...")]),L=setTimeout((function(){return e.setAlert(["error","Connection timeout."])}),5e3),Object(b.a)({},e,{mqtt:a})}catch(s){return console.log(JSON.stringify(s)),e.setAlert(["error",s]),e}case E:return e.setAlert(["info","Disconnecting..."]),e.mqtt&&e.mqtt.connected&&e.mqtt.end(),e.dispatch({type:w}),e;case j:if(!e.subscribedTo.topic){e.setAlert(["info","Subscribing to ".concat(e.subscribedTo.topic,"...")]);var o=Object(i.a)({},t.setting.subscribeTo.topic,{qos:t.setting.subscribeTo.qos});e.mqtt.subscribe(o,(function(n,r){n?e.setAlert(["error",n]):r[0].qos>2?e.setAlert(["error","Failed to subscribe topic."]):e.dispatch({type:y,granted:Object(b.a)({},r[0],{converter:t.setting.subscribeTo.converter})})}))}return e;case y:return e.clearAlert(),Object(b.a)({},e,{subscribedTo:t.granted});case q:return e.subscribedTo.topic&&(e.setAlert(["info","Unsubscribing from ".concat(e.subscribedTo.topic,"...")]),e.mqtt.unsubscribe(e.subscribedTo.topic,(function(t){t?e.setAlert(["error",t]):e.dispatch({type:w})}))),e;case w:return e.clearAlert(),Object(b.a)({},e,{subscribedTo:Object(b.a)({},e.subscribedTo,{topic:"",qos:0})});case x:return e.mqtt.publish(t.setting.publishTo.topic,t.setting.publishTo.message,{qos:t.setting.publishTo.qos},(function(t){t?e.setAlert(["error",t]):(e.setAlert(["success","Published"]),e.clearAlert(1e3))})),e;case M:return console.log(t.error),Object(b.a)({},e,{error:t.error});case D:case S:e.clearAlert(),clearTimeout(L);case A:case C:case k:return Object(b.a)({},e,{status:t.status});case F:return Object(b.a)({},e,{pause:!e.pause});default:return e}};function B(e){var t=e.children,n=a.a.useContext(g.a),r=Object(u.a)(n,3),c=(r[0],r[1]),o=r[2],s=a.a.useReducer(z,{dispatch:null,updateInterval:100,mqtt:null,status:"offline",subscribedTo:{topic:"",qos:0},messages:[],messagesCount:0,setAlert:c,clearAlert:o,pause:!1}),i=Object(u.a)(s,2),l=i[0],b=i[1];return a.a.useEffect((function(){return b({type:T,dispatch:b}),function(){p.a&&p.a.connected&&l.mqtt.end()}}),[p.a]),a.a.createElement(g.c.Provider,{value:[l,b]},t)}var J=(navigator.language||navigator.userLanguage).split("-").join("");function N(e){var t=e.children,n=m("appSetting",{locale:J,filter:{time:[null,null],text:["",""]}}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(g.b.Provider,{value:[c,o]},t)}function U(e){var t=e.children,n=a.a.useState([]),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(g.a.Provider,{value:[c,o,function(e){setTimeout((function(){return o([])}),e||100)}]},t)}var H=n(108),Q=n(109),$=n(112),G=n(113),K=function(e){Object(G.a)(n,e);var t=Object($.a)(n);function n(e){var r;return Object(H.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(Q.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",{style:{margin:"auto"}},"Oops! Something went wrong"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),V=n(111),X=n(237),Y=n(238),Z=n(232),_=n(110),ee=n(103),te=n(104),ne=n(26),re=n.n(ne);n(224);re.a.locale("en");var ce=Object.keys(r),ae=Object(X.a)({supportLocales:ce,typography:{fontFamily:'"Roboto", "Noto Sans TC", "Helvetica", "Arial", sans-serif'}});function oe(e){var t=e.children,n=a.a.useContext(g.b),c=Object(u.a)(n,2),o=c[0],s=(c[1],Object(X.a)(ae,Object(b.a)({},V[o.locale],{},r[o.locale],{i18n:function(e,t,n){return this.text&&this.text[e]&&this.text[e][t]?this.text[e][t]:n[t]}})));return a.a.createElement(Y.a,{theme:s},a.a.createElement(Z.a,{utils:_.a,locale:"".concat(o.locale.substring(0,2),"-").concat(o.locale.substring(2,4))},t))}function se(e){var t=e.children;return a.a.createElement(K,null,a.a.createElement(N,null,a.a.createElement(oe,null,a.a.createElement(U,null,a.a.createElement(h,null,a.a.createElement(B,null,t))))))}var ue=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,429))}));s.a.render(a.a.createElement(se,null,a.a.createElement(c.Suspense,{fallback:a.a.createElement("h3",null,"Loading...")},a.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u}));var r=n(3),c=function(e){return{topic:e.topic,message:e.message.toString(),qos:e.packet.qos,time:Date.now()}},a={default:{time:"Time",topic:"Topic",qos:"QoS",message:"Message"}},o={defaultFull:{cmd:"Command",retain:"Retained",dup:"Duplicate"}},s={default:c,defaultFull:function(e){return Object(r.a)({},c(e),{retain:e.packet.retain.toString(),dup:e.packet.dup.toString(),cmd:e.packet.cmd})}},u=[{value:"default",label:"Default"},{value:"defaultFull",label:"Default(Full)"},{value:"test",label:"test"}]},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(0),c=n.n(r),a=c.a.createContext(null),o=c.a.createContext(null),s=c.a.createContext(null),u=c.a.createContext(null)}},[[114,1,2]]]);
//# sourceMappingURL=main.cd383710.chunk.js.map