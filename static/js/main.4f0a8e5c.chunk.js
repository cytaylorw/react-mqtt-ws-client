(this["webpackJsonpreact-mqtt-ws-client"]=this["webpackJsonpreact-mqtt-ws-client"]||[]).push([[0],{204:function(e,t,a){e.exports=a(322)},209:function(e,t,a){},210:function(e,t,a){},215:function(e,t,a){},218:function(e,t){},220:function(e,t){},289:function(e,t){},291:function(e,t){},314:function(e,t){},315:function(e,t){},322:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(12),o=a.n(r),l=(a(209),a(10)),i=(a(210),a(363)),s=a(364),u=a(365),m=a(90),p=a(366),d=a(165),b=a.n(d),g=a(367),f=a(395),E=a(389),h=a(398),C=a(399),v=c.a.createContext(null),O=c.a.createContext(null);function y(){var e=c.a.useContext(v),t=Object(l.a)(e,2),a=t[0],n=(t[1],c.a.useContext(O)),r=Object(l.a)(n,2),o=r[0];r[1];return c.a.createElement(E.a,null,c.a.createElement(h.a,{label:"".concat(o.status.toUpperCase()).concat("connected"===o.status?" to ".concat(a.url):"")}),o.subscribedTo.topic?c.a.createElement(h.a,{avatar:c.a.createElement(C.a,null,o.subscribedTo.qos),label:o.subscribedTo.topic}):null)}var w=Object(i.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function j(e){var t=e.hidden,a=e.onChange,n=w();return c.a.createElement(s.a,{position:"static"},c.a.createElement(u.a,null,c.a.createElement(p.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu"},c.a.createElement(b.a,null)),c.a.createElement(m.a,{variant:"h6",className:n.title},"MQTT WS Client"),c.a.createElement(y,null),c.a.createElement(g.a,{control:c.a.createElement(f.a,{checked:t,onChange:function(e){a(e.target.checked)},color:"primary"}),label:"Hide Button"})))}var S=a(71),k=a(375),T=a(377),x=a(369),P=a(379),q=a(376),D=a(368),M=a(380),W=a(324),N=a(378),I=a(15),L=a(391),B=a(108),F=a.n(B),R=a(110),A=a.n(R),Q=a(109),U=a.n(Q),G=a(107),J=a.n(G),z=Object(i.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function H(e){var t=z(),a=Object(I.a)(),n=e.count,r=e.page,o=e.rowsPerPage,l=e.onChangePage;return c.a.createElement("div",{className:t.root},c.a.createElement(p.a,{onClick:function(e){l(e,0)},disabled:0===r,"aria-label":"first page"},"rtl"===a.direction?c.a.createElement(J.a,null):c.a.createElement(F.a,null)),c.a.createElement(p.a,{onClick:function(e){l(e,r-1)},disabled:0===r,"aria-label":"previous page"},"rtl"===a.direction?c.a.createElement(U.a,null):c.a.createElement(A.a,null)),c.a.createElement(p.a,{onClick:function(e){l(e,r+1)},disabled:r>=Math.ceil(n/o)-1,"aria-label":"next page"},"rtl"===a.direction?c.a.createElement(A.a,null):c.a.createElement(U.a,null)),c.a.createElement(p.a,{onClick:function(e){l(e,Math.max(0,Math.ceil(n/o)-1))},disabled:r>=Math.ceil(n/o)-1,"aria-label":"last page"},"rtl"===a.direction?c.a.createElement(F.a,null):c.a.createElement(J.a,null)))}function K(e,t,a){return{name:e,calories:t,fat:a}}[K("Cupcake",305,3.7),K("Donut",452,25),K("Eclair",262,16),K("Frozen yoghurt",159,6),K("Gingerbread",356,16),K("Honeycomb",408,3.2),K("Ice cream sandwich",237,9),K("Jelly Bean",375,0),K("KitKat",518,26),K("Lollipop",392,.2),K("Marshmallow",318,0),K("Nougat",360,19),K("Oreo",437,18)].sort((function(e,t){return e.calories<t.calories?-1:1}));var V=Object(i.a)({table:{minWidth:500}});function Z(e){V();var t=e.count,a=e.page,n=e.rowsPerPage,r=e.onChangePage,o=e.onChangeRowsPerPage,l=e.rowsPerPageOptions,i=e.colSpan,s=e.SelectProps;return c.a.createElement(D.a,null,c.a.createElement(L.a,{rowsPerPageOptions:l,colSpan:i,count:t,rowsPerPage:n,page:a,SelectProps:s,onChangePage:r,onChangeRowsPerPage:o,ActionsComponent:H}))}var $=a(374),X=a(106),Y=a.n(X),_=a(105),ee=a.n(_),te=Object(i.a)((function(e){return{root:{"& > *":{borderBottom:"unset"}},container:{marginTop:e.spacing(2)}}}));function ae(e){var t=e.columns,a=e.collpasedColumns,n=e.row,r=c.a.useState(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],u=te(),d=Object.keys(t).length+1;return c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,{className:u.root},c.a.createElement(x.a,null,a?c.a.createElement(p.a,{"aria-label":"expand row",size:"small",onClick:function(){return s(!i)}},i?c.a.createElement(ee.a,null):c.a.createElement(Y.a,null)):null),Object.keys(t).map((function(e){return c.a.createElement(x.a,{key:e},"time"===e?new Date(n[e]).toLocaleString():n[e])}))),a?c.a.createElement(D.a,null,c.a.createElement(x.a,{style:{paddingBottom:0,paddingTop:0},colSpan:d},c.a.createElement($.a,{in:i,timeout:"auto",unmountOnExit:!0},c.a.createElement(E.a,{margin:1},c.a.createElement(m.a,{variant:"h6",gutterBottom:!0,component:"div"},"Metadata"),c.a.createElement(k.a,{size:"small","aria-label":"purchases"},c.a.createElement(q.a,null,c.a.createElement(D.a,null,Object.entries(a).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return c.a.createElement(x.a,{key:a},n)})))),c.a.createElement(T.a,null,c.a.createElement(D.a,null,Object.keys(a).map((function(e){return c.a.createElement(x.a,{key:e},"time"===e?new Date(n[e]).toLocaleString():n[e])}))))))))):null)}var ne=Object(i.a)((function(e){return{root:{"& > *":{borderBottom:"unset"}},container:{marginTop:e.spacing(2)}}})),ce={time:"Time",topic:"Topic",message:"Message"},re={qos:"QoS",retain:"Retained",dup:"Duplicate"};function oe(){var e=ne(),t=c.a.useContext(O),a=Object(l.a)(t,2),n=a[0],r=(a[1],c.a.useState(0)),o=Object(l.a)(r,2),i=o[0],s=o[1],u=c.a.useState(10),m=Object(l.a)(u,2),p=m[0],d=m[1];return c.a.createElement(N.a,{maxWidth:"xl",className:e.container},c.a.createElement(P.a,{component:W.a},c.a.createElement(k.a,{size:"small","aria-label":"collapsible table"},c.a.createElement(q.a,null,c.a.createElement(D.a,null,c.a.createElement(x.a,null),Object.entries(ce).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return c.a.createElement(x.a,{key:a},n)})))),c.a.createElement(T.a,null,Object(S.a)(n.messages).reverse().slice(i*p,i*p+p).map((function(e,t){return c.a.createElement(ae,{key:t,row:e,columns:ce,collpasedColumns:re})}))),c.a.createElement(M.a,null,c.a.createElement(Z,{rowsPerPageOptions:[10,25,50],colSpan:7,count:n.messages.length,rowsPerPage:p,page:i,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),s(0)}})))))}var le=a(396),ie=a(397),se=a(393),ue=a(166),me=a.n(ue),pe=a(167),de=a.n(pe),be=a(172),ge=a.n(be),fe=a(168),Ee=a.n(fe),he=a(169),Ce=a.n(he),ve=a(170),Oe=a.n(ve),ye=a(171),we=a.n(ye),je=(a(215),Object(i.a)((function(e){return{root:{transform:"translateZ(0px)",flexGrow:1},configActionsWrapper:{position:"relative",marginTop:e.spacing(3),height:380},radioGroup:{margin:e.spacing(1,0)},speedDial:{position:"fixed","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}}}})));function Se(e){var t=e.hidden,a=e.onConnectClick,n=e.onSubscribeClick,r=je(),o=c.a.useState(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],m=c.a.useContext(O),p=Object(l.a)(m,2),d=p[0],b=p[1],g=function(){u(!1)},f=[{icon:c.a.createElement(me.a,null),name:"Connect",handler:function(){g(),a(!0)},open:!0},{icon:c.a.createElement(de.a,null),name:"Disconnect",handler:function(){"connected"===d.status&&b({type:"disconnect",dispatch:b})},open:"connected"===d.status},{icon:c.a.createElement(Ee.a,null),name:"Subscribe",handler:function(){g(),n(!0)},open:"connected"===d.status},{icon:c.a.createElement(Ce.a,null),name:"Unsubscribe",handler:function(){d.subscribedTo.topic&&b({type:"unsubscribe",dispatch:b})},open:!!d.subscribedTo.topic},{icon:c.a.createElement(Oe.a,null),name:"Publish",open:"connected"===d.status},{icon:c.a.createElement(we.a,null),name:"History",open:!!d.messages},{icon:c.a.createElement(ge.a,null),name:"Settings",open:!!d.messages}];return c.a.createElement(le.a,{ariaLabel:"SpeedDial example",className:"".concat(r.speedDial," ConfigActions ").concat(t?"ConfigActions-hide":""),hidden:t,icon:c.a.createElement(ie.a,null),onClose:g,onOpen:function(){u(!0)},open:s,direction:"up"},f.map((function(e){if(e.open)return c.a.createElement(se.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.handler,tooltipOpen:e.open})})))}var ke=a(40),Te=a(22),xe=a(388),Pe=a(401),qe=a(394),De=a(387),Me=a(385),We=a(386),Ne=a(384),Ie=(a(3),a(370)),Le=a(402),Be=a(383),Fe=a(382),Re=a(174),Ae=a.n(Re),Qe=a(175),Ue=a.n(Qe),Ge=Object(i.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}}));function Je(e){var t=Ge(),a=e.open,n=e.onChange,r=c.a.useState(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],u=c.a.useContext(v),m=Object(l.a)(u,2),d=m[0],b=m[1],E=c.a.useContext(O),h=Object(l.a)(E,2),C=(h[0],h[1]),y=function(){n(!1)},w=function(e){return function(t){console.log(t.target.checked),b(Object(Te.a)({},d,Object(ke.a)({},e,"checkbox"===t.target.type?t.target.checked:t.target.value)))}},j=c.a.createElement(c.a.Fragment,null,c.a.createElement(Pe.a,{fullWidth:!0,className:t.margin,id:"mqtt-username",label:"Username",value:d.username,onChange:w("username")}),c.a.createElement(Fe.a,{fullWidth:!0,className:t.margin},c.a.createElement(Le.a,{htmlFor:"standard-adornment-password"},"Password"),c.a.createElement(Ie.a,{id:"standard-adornment-password",type:i?"text":"password",value:d.password,onChange:w("password"),endAdornment:c.a.createElement(Be.a,{position:"end"},c.a.createElement(p.a,{"aria-label":"toggle password visibility",onClick:function(){s(!i)},onMouseDown:function(e){e.preventDefault()}},i?c.a.createElement(Ae.a,null):c.a.createElement(Ue.a,null)))})));return c.a.createElement(qe.a,{fullWidth:!0,open:a,onClose:y,"aria-labelledby":"connect-dialog-title"},c.a.createElement(Ne.a,{id:"connect-dialog-title"},"Connect to MQTT"),c.a.createElement(Me.a,null,c.a.createElement(We.a,null,"Connect to a MQTT server over WebSocket."),c.a.createElement(Fe.a,{fullWidth:!0,className:t.margin},c.a.createElement(Le.a,{htmlFor:"standard-adornment-amount"},"URL"),c.a.createElement(Ie.a,{id:"standard-adornment-url",value:d.url,onChange:w("url")})),c.a.createElement(Pe.a,{fullWidth:!0,className:t.margin,id:"mqtt-clientId",label:"Client ID",value:d.clientId,onChange:w("clientId")}),c.a.createElement(Fe.a,{fullWidth:!0,className:t.margin},c.a.createElement(g.a,{control:c.a.createElement(f.a,{checked:d.anomynous,onChange:w("anomynous"),name:"anomynous",color:"primary"}),label:"Anomynous"})),d.anomynous?null:j),c.a.createElement(De.a,null,c.a.createElement(xe.a,{onClick:y,color:"primary"},"Cancel"),c.a.createElement(xe.a,{onClick:function(){C({type:"disconnect"})},color:"primary"},"Disconnect"),c.a.createElement(xe.a,{onClick:function(){C({type:"connect",setting:d})},color:"primary"},"Connect")))}var ze=a(403),He=Object(i.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},slider:{width:"100px",marginLeft:e.spacing(2)}}}));function Ke(e){var t=He(),a=e.open,n=e.onChange,r=c.a.useContext(v),o=Object(l.a)(r,2),i=o[0],s=o[1],u=c.a.useContext(O),m=Object(l.a)(u,2),p=(m[0],m[1]),d=function(){n(!1)},b=function(e){return function(t,a){s(Object(Te.a)({},i,{subscribeTo:Object(Te.a)({},i.subscribeTo,Object(ke.a)({},e,"undefined"===typeof a?t.target.value:a))}))}};return c.a.createElement(qe.a,{fullWidth:!0,open:a,onClose:d,"aria-labelledby":"subscribe-dialog-title"},c.a.createElement(Ne.a,{id:"subscribe-dialog-title"},"Subscribe"),c.a.createElement(Me.a,null,c.a.createElement(We.a,null,"Subscribe to a MQTT topic."),c.a.createElement(Pe.a,{autoFocus:!0,id:"topic",label:"Topic",type:"text",fullWidth:!0,className:t.margin,onChange:b("topic"),value:i.subscribeTo.topic}),c.a.createElement(g.a,{control:c.a.createElement(ze.a,{defaultValue:i.subscribeTo.qos,min:0,max:2,"aria-labelledby":"discrete-slider-always",step:1,marks:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"}],valueLabelDisplay:"off",className:t.slider,onChange:b("qos")}),label:"Qos",labelPlacement:"start",className:t.margin})),c.a.createElement(De.a,null,c.a.createElement(xe.a,{onClick:d,color:"primary"},"Cancel"),c.a.createElement(xe.a,{onClick:function(){p({type:"unsubscribe",dispatch:p})},color:"primary"},"Unsubscribe"),c.a.createElement(xe.a,{onClick:function(){p({type:"subscribe",setting:i,dispatch:p})},color:"primary"},"Subscribe")))}function Ve(e){var t=e.open,a=e.onChange;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Je,{open:t.openConnectDialog,onChange:a.setOpenConnectDialog}),c.a.createElement(Ke,{open:t.openSubscribeDialog,onChange:a.setOpenSubscribeDialog}))}var Ze=function(){var e=c.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],r=c.a.useState(!1),o=Object(l.a)(r,2),i=o[0],s=o[1],u=c.a.useState(!1),m=Object(l.a)(u,2),p=m[0],d=m[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(j,{hidden:a,onChange:n}),c.a.createElement(oe,null),c.a.createElement(Se,{hidden:a,onConnectClick:s,onSubscribeClick:d}),c.a.createElement(Ve,{open:{openConnectDialog:i,openSubscribeDialog:p},onChange:{setOpenConnectDialog:s,setOpenSubscribeDialog:d}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $e=a(72),Xe=a.n($e),Ye=(a(321),"mwc".endsWith("-")?"mwc":"mwc-");function _e(e){var t=e.children,a=function(e,t){var a=Ye+e,c=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),r=Object(l.a)(c,2),o=r[0],i=r[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(o))}),[a,o]),[o,i]}("mqttSetting",{url:"https"===window.location.protocol?"wss://":"ws://",clientId:"mqtt-ws-client-".concat(Date.now().toString(36)),anomynous:!1,username:"",password:"",topic:["",0],subscribeTo:{topic:"",qos:0}}),r=Object(l.a)(a,2),o=r[0],i=r[1];return c.a.createElement(v.Provider,{value:[o,i]},t)}var et="init",tt="connect",at="subscribe",nt="subscribed",ct="unsubscribe",rt="unsubscribed",ot="disconnect",lt="onConnect",it="onReconnect",st="onClose",ut="onOffline",mt="onError",pt="onMessage",dt="updateStatus",bt="updateMessages",gt=[{messages:[]}],ft=null,Et=function(e,t){switch(t.type){case pt:var a=gt.length-1;return gt[a].messages.push({topic:t.topic,message:t.message.toString(),qos:t.packet.qos,retain:t.packet.retain,dup:t.packet.dup,time:Date.now()}),ft||(ft=setTimeout((function(){return e.dispatch({type:bt})}),e.updateInterval)),e;case bt:gt.push({messages:[]}),ft=null;var n=gt[0].messages;return gt.shift(),Object(Te.a)({},e,{messages:[].concat(Object(S.a)(e.messages),Object(S.a)(n)),messagesCount:e.messagesCount+n.length});case at:if(!e.subscribedTo.topic){var c=Object(ke.a)({},t.setting.subscribeTo.topic,{qos:t.setting.subscribeTo.qos});e.mqtt.subscribe(c,(function(t,a){!t&&a[0].qos<=2&&e.dispatch({type:nt,granted:a[0]})}))}return e;case nt:return Object(Te.a)({},e,{subscribedTo:t.granted});case et:return Object(Te.a)({},e,{dispatch:t.dispatch});case tt:e.mqtt&&e.mqtt.connected&&e.mqtt.end();var r=t.setting,o=Xe.a.connect(r.url,Object(Te.a)({},r,{username:r.anonymous?void 0:r.username,password:r.anonymous?void 0:r.password,reconnectPeriod:0}));return o.on("connect",(function(){return e.dispatch({type:lt,status:"connected"})})),o.on("reconnect",(function(){return e.dispatch({type:it,status:"reconnecting"})})),o.on("close",(function(){return e.dispatch({type:st,status:"closed"})})),o.on("offline",(function(){return e.dispatch({type:ut,status:"offline"})})),o.on("error",(function(t){return e.dispatch({type:mt,error:t})})),o.on("message",(function(a,n,c){return e.dispatch({type:pt,topic:a,message:n,packet:c,dispatch:t.dispatch})})),Object(Te.a)({},e,{mqtt:o});case ot:return e.mqtt&&e.mqtt.connected&&e.mqtt.end(),e.dispatch({type:rt}),e;case ct:return e.subscribedTo.topic&&e.mqtt.unsubscribe(e.subscribedTo.topic,(function(t){t||e.dispatch({type:rt})})),e;case rt:return Object(Te.a)({},e,{subscribedTo:{topic:"",qos:0}});case mt:return console.log(t.error),Object(Te.a)({},e,{error:t.error});case dt:case lt:case it:case st:case ut:return Object(Te.a)({},e,{status:t.status});default:return e}};function ht(e){var t=e.children,a=c.a.useReducer(Et,{dispatch:null,updateInterval:100,mqtt:null,status:"offline",subscribedTo:{topic:"",qos:0},messages:[],messagesCount:0}),n=Object(l.a)(a,2),r=n[0],o=n[1];return c.a.useEffect((function(){return o({type:et,dispatch:o}),function(){Xe.a&&Xe.a.connected&&r.mqtt.end()}}),[Xe.a]),c.a.createElement(O.Provider,{value:[r,o]},t)}function Ct(e){var t=e.children;return c.a.createElement(_e,null,c.a.createElement(ht,null,t))}o.a.render(c.a.createElement(Ct,null,c.a.createElement(Ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,2]]]);
//# sourceMappingURL=main.4f0a8e5c.chunk.js.map