(this["webpackJsonpreact-mqtt-ws-client"]=this["webpackJsonpreact-mqtt-ws-client"]||[]).push([[0],{102:function(e,t){t.zhTW={props:{MuiBreadcrumbs:{expandText:"\u986f\u793a\u8def\u5f91"},MuiTablePagination:{backIconButtonText:"\u4e0a\u4e00\u9801",labelRowsPerPage:"\u6bcf\u9801\u7b46\u6578\uff1a",labelDisplayedRows:function(e){var t=e.from,n=e.to,r=e.count;return"".concat(t,"-").concat(n,"  \u5171").concat(-1!==r?r:"\u5927\u65bc ".concat(n))},nextIconButtonText:"\u4e0b\u4e00\u9801"},MuiRating:{getLabelText:function(e){return"".concat(e,"\u661f")},emptyLabelText:"\u7121"},MuiAutocomplete:{clearText:"\u6e05\u9664",closeText:"\u95dc\u9589",loadingText:"\u8f09\u5165\u4e2d\u2026",noOptionsText:"\u7121\u9078\u9805",openText:"\u958b\u555f"},MuiAlert:{closeText:"\u95dc\u9589"},MuiPagination:{"aria-label":"\u5206\u9801\u5c0e\u89bd",getItemAriaLabel:function(e,t,n){return"page"===e?"\u7b2c".concat(t,"\u9801"):"first"===e?"\u7b2c\u4e00\u9801":"last"===e?"\u6700\u5f8c\u4e00\u9801":"next"===e?"\u4e0b\u4e00\u9801":"previous"===e?"\u4e0a\u4e00\u9801":void 0}}},text:{MuiMqttCommon:{connect:"\u9023\u7dda",disconnect:"\u4e2d\u65b7\u9023\u7dda",subscribe:"\u8a02\u95b1",unsubscribe:"\u53d6\u6d88\u8a02\u95b1",publish:"\u767c\u5e03"},MuiConfigActions:{settings:"\u8a2d\u5b9a"}}}},103:function(e,t){t.enUS={}},113:function(e,t,n){e.exports=n(226)},118:function(e,t,n){},121:function(e,t){},123:function(e,t){},192:function(e,t){},194:function(e,t){},216:function(e,t){},217:function(e,t){},226:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"zhTW",(function(){return ee.zhTW})),n.d(r,"enUS",(function(){return te.enUS}));var c=n(0),a=n.n(c),o=n(54),s=n.n(o);n(118),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=n(5),i=n(31),l=n(52),b=n(3),d=n(41),p=n.n(d),f=n(6),m=n(58),g="init",h="connect",v="subscribe",T="subscribed",O="unsubscribe",j="unsubscribed",y="publish",q="disconnect",w="onConnect",x="onReconnect",E="onClose",S="onOffline",A="onError",C="onMessage",k="updateStatus",M="updateMessages",P="togglePause",D=[{messages:[]}],I=null,F=null,R=function(e,t){switch(t.type){case C:var n=D.length-1;return D[n].messages.push(m.c[e.subscribedTo.converter](t)),I||e.pause||(I=setTimeout((function(){return e.dispatch({type:M})}),e.updateInterval)),e;case M:D.push({messages:[]}),I=null;var r=D[0].messages;return D.shift(),Object(b.a)({},e,{messages:[].concat(Object(l.a)(e.messages),Object(l.a)(r)),messagesCount:e.messagesCount+r.length});case g:return Object(b.a)({},e,{dispatch:t.dispatch});case h:e.mqtt&&e.mqtt.connected&&e.mqtt.end();var c=t.setting;try{var a=p.a.connect(c.url,Object(b.a)({},c,{username:c.anonymous?void 0:c.username,password:c.anonymous?void 0:c.password,reconnectPeriod:0}));return a.on("connect",(function(){return e.dispatch({type:w,status:"connected"})})),a.on("reconnect",(function(){return e.dispatch({type:x,status:"reconnecting"})})),a.on("close",(function(){return e.dispatch({type:E,status:"closed"})})),a.on("offline",(function(){return e.dispatch({type:S,status:"offline"})})),a.on("error",(function(t){return e.dispatch({type:A,error:t})})),a.on("message",(function(t,n,r){return e.dispatch({type:C,topic:t,message:n,packet:r})})),e.setAlert(["info","Connecting to ".concat(c.url,"...")]),F=setTimeout((function(){return e.setAlert(["error","Connection timeout."])}),5e3),Object(b.a)({},e,{mqtt:a})}catch(s){return console.log(JSON.stringify(s)),e.setAlert(["error",s]),e}case q:return e.setAlert(["info","Disconnecting..."]),e.mqtt&&e.mqtt.connected&&e.mqtt.end(),e.dispatch({type:j}),e;case v:if(!e.subscribedTo.topic){e.setAlert(["info","Subscribing to ".concat(e.subscribedTo.topic,"...")]);var o=Object(i.a)({},t.setting.subscribeTo.topic,{qos:t.setting.subscribeTo.qos});e.mqtt.subscribe(o,(function(n,r){n?e.setAlert(["error",n]):r[0].qos>2?e.setAlert(["error","Failed to subscribe topic."]):e.dispatch({type:T,granted:Object(b.a)({},r[0],{converter:t.setting.subscribeTo.converter})})}))}return e;case T:return e.clearAlert(),Object(b.a)({},e,{subscribedTo:t.granted});case O:return e.subscribedTo.topic&&(e.setAlert(["info","Unsubscribing from ".concat(e.subscribedTo.topic,"...")]),e.mqtt.unsubscribe(e.subscribedTo.topic,(function(t){t?e.setAlert(["error",t]):e.dispatch({type:j})}))),e;case j:return e.clearAlert(),Object(b.a)({},e,{subscribedTo:Object(b.a)({},e.subscribedTo,{topic:"",qos:0})});case y:return e.mqtt.publish(t.setting.publishTo.topic,t.setting.publishTo.message,{qos:t.setting.publishTo.qos},(function(t){t?e.setAlert(["error",t]):(e.setAlert(["success","Published"]),e.clearAlert(1e3))})),e;case A:return console.log(t.error),Object(b.a)({},e,{error:t.error});case k:case w:e.clearAlert(),clearTimeout(F);case x:case E:case S:return Object(b.a)({},e,{status:t.status});case P:return Object(b.a)({},e,{pause:!e.pause});default:return e}};function W(e){var t=e.children,n=a.a.useContext(f.a),r=Object(u.a)(n,3),c=r[1],o=r[2],s=a.a.useReducer(R,{dispatch:null,updateInterval:100,mqtt:null,status:"offline",subscribedTo:{topic:"",qos:0},messages:[],messagesCount:0,setAlert:c,clearAlert:o,pause:!1}),i=Object(u.a)(s,2),l=i[0],b=i[1];return a.a.useEffect((function(){return b({type:g,dispatch:b}),function(){p.a&&p.a.connected&&l.mqtt.end()}}),[l.mqtt]),a.a.createElement(f.c.Provider,{value:[l,b]},t)}var L="mwc".endsWith("-")?"mwc":"mwc-";function z(e,t){var n=L+e,r=Object(c.useState)((function(){var e=localStorage.getItem(n);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),a=Object(u.a)(r,2),o=a[0],s=a[1];return Object(c.useEffect)((function(){localStorage.setItem(n,JSON.stringify(o))}),[n,o]),[o,s]}function B(e){var t=e.children,n=z("mqttSetting",{url:"https:"===window.location.protocol?"wss://":"ws://",clientId:"mqtt-ws-client-".concat(Date.now().toString(36)),anomynous:!1,username:"",password:"",topic:["",0],subscribeTo:{topic:"",qos:0,converter:"default"},publishTo:{topic:"",qos:0},locale:"zhTW"}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(f.d.Provider,{value:[c,o]},t)}var J=(navigator.language||navigator.userLanguage).split("-").join("");function N(e){var t=e.children,n=z("appSetting",{locale:J,filter:{time:[null,null],text:["",""]}}),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(f.b.Provider,{value:[c,o]},t)}function U(e){var t=e.children,n=a.a.useState([]),r=Object(u.a)(n,2),c=r[0],o=r[1];return a.a.createElement(f.a.Provider,{value:[c,o,function(e){setTimeout((function(){return o([])}),e||100)}]},t)}var H=n(107),Q=n(108),$=n(111),G=n(112),K=function(e){Object(G.a)(n,e);var t=Object($.a)(n);function n(e){var r;return Object(H.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(Q.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?a.a.createElement("h1",{style:{margin:"auto"}},"Oops! Something went wrong"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),V=n(110),X=n(236),Y=n(237),Z=n(231),_=n(109),ee=n(102),te=n(103),ne=n(26),re=n.n(ne);n(223);re.a.locale("en");var ce=Object.keys(r),ae=Object(X.a)({supportLocales:ce,typography:{fontFamily:'"Roboto", "Noto Sans TC", "Helvetica", "Arial", sans-serif'}});function oe(e){var t=e.children,n=a.a.useContext(f.b),c=Object(u.a)(n,1)[0],o=Object(X.a)(ae,Object(b.a)({},V[c.locale],{},r[c.locale],{i18n:function(e,t,n){return this.text&&this.text[e]&&this.text[e][t]?this.text[e][t]:n[t]}}));return a.a.createElement(Y.a,{theme:o},a.a.createElement(Z.a,{utils:_.a,locale:"".concat(c.locale.substring(0,2),"-").concat(c.locale.substring(2,4))},t))}function se(e){var t=e.children;return a.a.createElement(K,null,a.a.createElement(N,null,a.a.createElement(oe,null,a.a.createElement(U,null,a.a.createElement(B,null,a.a.createElement(W,null,t))))))}var ue=Object(c.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,420))}));s.a.render(a.a.createElement(se,null,a.a.createElement(c.Suspense,{fallback:a.a.createElement("h3",null,"Loading...")},a.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return u}));var r=n(3),c=function(e){return{topic:e.topic,message:e.message.toString(),qos:e.packet.qos,time:Date.now()}},a={default:{time:"Time",topic:"Topic",qos:"QoS",message:"Message"}},o={defaultFull:{cmd:"Command",retain:"Retained",dup:"Duplicate"}},s={default:c,defaultFull:function(e){return Object(r.a)({},c(e),{retain:e.packet.retain.toString(),dup:e.packet.dup.toString(),cmd:e.packet.cmd})}},u=[{value:"default",label:"Default"},{value:"defaultFull",label:"Default(Full)"},{value:"test",label:"test"}]},6:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u}));var r=n(0),c=n.n(r),a=c.a.createContext(null),o=c.a.createContext(null),s=c.a.createContext(null),u=c.a.createContext(null)}},[[113,1,2]]]);
//# sourceMappingURL=main.72fe6b0c.chunk.js.map