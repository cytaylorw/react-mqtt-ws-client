(this["webpackJsonpreact-mqtt-ws-client"]=this["webpackJsonpreact-mqtt-ws-client"]||[]).push([[0],{208:function(e,t,a){e.exports=a(326)},213:function(e,t,a){},214:function(e,t,a){},219:function(e,t,a){},222:function(e,t){},224:function(e,t){},293:function(e,t){},295:function(e,t){},318:function(e,t){},319:function(e,t){},326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),l=(a(213),a(10)),i=(a(214),a(368)),s=a(369),u=a(370),m=a(91),p=a(371),d=a(165),b=a.n(d),g=a(372),f=a(401),h=a(394),E=a(404),v=a(405),C=r.a.createContext(null),O=r.a.createContext(null),y=r.a.createContext(null);function w(){var e=r.a.useContext(C),t=Object(l.a)(e,2),a=t[0],n=(t[1],r.a.useContext(O)),c=Object(l.a)(n,2),o=c[0];c[1];return r.a.createElement(h.a,null,r.a.createElement(E.a,{label:"".concat(o.status.toUpperCase()).concat("connected"===o.status?" to ".concat(a.url):"")}),o.subscribedTo.topic?r.a.createElement(E.a,{avatar:r.a.createElement(v.a,null,o.subscribedTo.qos),label:o.subscribedTo.topic}):null)}var j=Object(i.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function S(e){var t=e.hidden,a=e.onChange,n=j();return r.a.createElement(s.a,{position:"static"},r.a.createElement(u.a,null,r.a.createElement(p.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(b.a,null)),r.a.createElement(m.a,{variant:"h6",className:n.title},"MQTT WS Client"),r.a.createElement(w,null),r.a.createElement(g.a,{control:r.a.createElement(f.a,{checked:t,onChange:function(e){a(e.target.checked)},color:"primary"}),label:"Hide Button"})))}var k=a(72),x=a(380),T=a(382),P=a(374),D=a(384),q=a(381),N=a(373),M=a(385),W=a(328),I=a(383),F=a(15),L=a(396),B=a(108),A=a.n(B),R=a(110),J=a.n(R),Q=a(109),U=a.n(Q),G=a(107),z=a.n(G),H=Object(i.a)((function(e){return{root:{flexShrink:0,marginLeft:e.spacing(2.5)}}}));function K(e){var t=H(),a=Object(F.a)(),n=e.count,c=e.page,o=e.rowsPerPage,l=e.onChangePage;return r.a.createElement("div",{className:t.root},r.a.createElement(p.a,{onClick:function(e){l(e,0)},disabled:0===c,"aria-label":"first page"},"rtl"===a.direction?r.a.createElement(z.a,null):r.a.createElement(A.a,null)),r.a.createElement(p.a,{onClick:function(e){l(e,c-1)},disabled:0===c,"aria-label":"previous page"},"rtl"===a.direction?r.a.createElement(U.a,null):r.a.createElement(J.a,null)),r.a.createElement(p.a,{onClick:function(e){l(e,c+1)},disabled:c>=Math.ceil(n/o)-1,"aria-label":"next page"},"rtl"===a.direction?r.a.createElement(J.a,null):r.a.createElement(U.a,null)),r.a.createElement(p.a,{onClick:function(e){l(e,Math.max(0,Math.ceil(n/o)-1))},disabled:c>=Math.ceil(n/o)-1,"aria-label":"last page"},"rtl"===a.direction?r.a.createElement(A.a,null):r.a.createElement(z.a,null)))}function V(e,t,a){return{name:e,calories:t,fat:a}}[V("Cupcake",305,3.7),V("Donut",452,25),V("Eclair",262,16),V("Frozen yoghurt",159,6),V("Gingerbread",356,16),V("Honeycomb",408,3.2),V("Ice cream sandwich",237,9),V("Jelly Bean",375,0),V("KitKat",518,26),V("Lollipop",392,.2),V("Marshmallow",318,0),V("Nougat",360,19),V("Oreo",437,18)].sort((function(e,t){return e.calories<t.calories?-1:1}));var Z=Object(i.a)({table:{minWidth:500}});function $(e){Z();var t=e.count,a=e.page,n=e.rowsPerPage,c=e.onChangePage,o=e.onChangeRowsPerPage,l=e.rowsPerPageOptions,i=e.colSpan,s=e.SelectProps;return r.a.createElement(N.a,null,r.a.createElement(L.a,{rowsPerPageOptions:l,colSpan:i,count:t,rowsPerPage:n,page:a,SelectProps:s,onChangePage:c,onChangeRowsPerPage:o,ActionsComponent:K}))}var X=a(379),Y=a(106),_=a.n(Y),ee=a(105),te=a.n(ee),ae=Object(i.a)((function(e){return{root:{"& > *":{borderBottom:"unset"}},container:{marginTop:e.spacing(2)}}}));function ne(e){var t=e.columns,a=e.collpasedColumns,n=e.row,c=r.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=ae(),d=Object.keys(t).length+1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:u.root},r.a.createElement(P.a,null,a?r.a.createElement(p.a,{"aria-label":"expand row",size:"small",onClick:function(){return s(!i)}},i?r.a.createElement(te.a,null):r.a.createElement(_.a,null)):null),Object.keys(t).map((function(e){return r.a.createElement(P.a,{key:e},"time"===e?new Date(n[e]).toLocaleString():n[e])}))),a?r.a.createElement(N.a,null,r.a.createElement(P.a,{style:{paddingBottom:0,paddingTop:0},colSpan:d},r.a.createElement(X.a,{in:i,timeout:"auto",unmountOnExit:!0},r.a.createElement(h.a,{margin:1},r.a.createElement(m.a,{variant:"h6",gutterBottom:!0,component:"div"},"Metadata"),r.a.createElement(x.a,{size:"small","aria-label":"purchases"},r.a.createElement(q.a,null,r.a.createElement(N.a,null,Object.entries(a).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement(P.a,{key:a},n)})))),r.a.createElement(T.a,null,r.a.createElement(N.a,null,Object.keys(a).map((function(e){return r.a.createElement(P.a,{key:e},"time"===e?new Date(n[e]).toLocaleString():n[e])}))))))))):null)}var re=Object(i.a)((function(e){return{root:{"& > *":{borderBottom:"unset"}},container:{marginTop:e.spacing(2)}}})),ce={time:"Time",topic:"Topic",message:"Message"},oe={qos:"QoS",retain:"Retained",dup:"Duplicate"};function le(){var e=re(),t=r.a.useContext(O),a=Object(l.a)(t,2),n=a[0],c=(a[1],r.a.useState(0)),o=Object(l.a)(c,2),i=o[0],s=o[1],u=r.a.useState(10),m=Object(l.a)(u,2),p=m[0],d=m[1];return r.a.createElement(I.a,{maxWidth:"xl",className:e.container},r.a.createElement(D.a,{component:W.a},r.a.createElement(x.a,{size:"small","aria-label":"collapsible table"},r.a.createElement(q.a,null,r.a.createElement(N.a,null,r.a.createElement(P.a,null),Object.entries(ce).map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return r.a.createElement(P.a,{key:a},n)})))),r.a.createElement(T.a,null,Object(k.a)(n.messages).reverse().slice(i*p,i*p+p).map((function(e,t){return r.a.createElement(ne,{key:t,row:e,columns:ce,collpasedColumns:oe})}))),r.a.createElement(M.a,null,r.a.createElement($,{rowsPerPageOptions:[10,25,50],colSpan:7,count:n.messages.length,rowsPerPage:p,page:i,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:function(e,t){s(t)},onChangeRowsPerPage:function(e){d(parseInt(e.target.value,10)),s(0)}})))))}var ie=a(402),se=a(403),ue=a(399),me=a(166),pe=a.n(me),de=a(167),be=a.n(de),ge=a(172),fe=a.n(ge),he=a(168),Ee=a.n(he),ve=a(169),Ce=a.n(ve),Oe=a(170),ye=a.n(Oe),we=a(171),je=a.n(we),Se=(a(219),Object(i.a)((function(e){return{root:{transform:"translateZ(0px)",flexGrow:1},configActionsWrapper:{position:"relative",marginTop:e.spacing(3),height:380},radioGroup:{margin:e.spacing(1,0)},speedDial:{position:"fixed","&.MuiSpeedDial-directionUp, &.MuiSpeedDial-directionLeft":{bottom:e.spacing(2),right:e.spacing(2)},"&.MuiSpeedDial-directionDown, &.MuiSpeedDial-directionRight":{top:e.spacing(2),left:e.spacing(2)}}}})));function ke(e){var t=e.hidden,a=e.onConnectClick,n=e.onSubscribeClick,c=Se(),o=r.a.useState(!1),i=Object(l.a)(o,2),s=i[0],u=i[1],m=r.a.useContext(O),p=Object(l.a)(m,2),d=p[0],b=p[1],g=function(){u(!1)},f=[{icon:r.a.createElement(pe.a,null),name:"Connect",handler:function(){g(),a(!0)},open:!0},{icon:r.a.createElement(be.a,null),name:"Disconnect",handler:function(){"connected"===d.status&&b({type:"disconnect",dispatch:b})},open:"connected"===d.status},{icon:r.a.createElement(Ee.a,null),name:"Subscribe",handler:function(){g(),n(!0)},open:"connected"===d.status},{icon:r.a.createElement(Ce.a,null),name:"Unsubscribe",handler:function(){d.subscribedTo.topic&&b({type:"unsubscribe",dispatch:b})},open:!!d.subscribedTo.topic},{icon:r.a.createElement(ye.a,null),name:"Publish",open:"connected"===d.status},{icon:r.a.createElement(je.a,null),name:"History",open:!!d.messages},{icon:r.a.createElement(fe.a,null),name:"Settings",open:!!d.messages}];return r.a.createElement(ie.a,{ariaLabel:"SpeedDial example",className:"".concat(c.speedDial," ConfigActions ").concat(t?"ConfigActions-hide":""),hidden:t,icon:r.a.createElement(se.a,null),onClose:g,onOpen:function(){u(!0)},open:s,direction:"up"},f.map((function(e){if(e.open)return r.a.createElement(ue.a,{key:e.name,icon:e.icon,tooltipTitle:e.name,onClick:e.handler,tooltipOpen:e.open})})))}var xe=a(397),Te=Object(i.a)((function(e){return{root:{width:"100%",position:"fixed",top:e.spacing(10),"& > * + *":{marginTop:e.spacing(2)}}}}));function Pe(){var e=Te(),t=r.a.useContext(y),a=Object(l.a)(t,2),n=a[0],c=a[1];console.log(n);return r.a.createElement("div",{className:e.root},n.length>1?r.a.createElement(xe.a,{severity:n[0],onClose:function(){c([])}},"object"===typeof n[1]&&null!==n[1]&&n[1].message?n[1].message:JSON.stringify(n[1])):null)}var De=a(41),qe=a(22),Ne=a(393),Me=a(407),We=a(400),Ie=a(392),Fe=a(390),Le=a(391),Be=a(389),Ae=(a(3),a(375)),Re=a(408),Je=a(388),Qe=a(387),Ue=a(174),Ge=a.n(Ue),ze=a(175),He=a.n(ze),Ke=Object(i.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}}));function Ve(e){var t=Ke(),a=e.open,n=e.onChange,c=r.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=r.a.useContext(C),m=Object(l.a)(u,2),d=m[0],b=m[1],h=r.a.useContext(O),E=Object(l.a)(h,2),v=(E[0],E[1]),y=function(){n(!1)},w=function(e){return function(t){console.log(t.target.checked),b(Object(qe.a)({},d,Object(De.a)({},e,"checkbox"===t.target.type?t.target.checked:t.target.value)))}},j=r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{fullWidth:!0,className:t.margin,id:"mqtt-username",label:"Username",value:d.username,onChange:w("username")}),r.a.createElement(Qe.a,{fullWidth:!0,className:t.margin},r.a.createElement(Re.a,{htmlFor:"standard-adornment-password"},"Password"),r.a.createElement(Ae.a,{id:"standard-adornment-password",type:i?"text":"password",value:d.password,onChange:w("password"),endAdornment:r.a.createElement(Je.a,{position:"end"},r.a.createElement(p.a,{"aria-label":"toggle password visibility",onClick:function(){s(!i)},onMouseDown:function(e){e.preventDefault()}},i?r.a.createElement(Ge.a,null):r.a.createElement(He.a,null)))})));return r.a.createElement(We.a,{fullWidth:!0,open:a,onClose:y,"aria-labelledby":"connect-dialog-title"},r.a.createElement(Be.a,{id:"connect-dialog-title"},"Connect to MQTT"),r.a.createElement(Fe.a,null,r.a.createElement(Le.a,null,"Connect to a MQTT server over WebSocket."),r.a.createElement(Qe.a,{fullWidth:!0,className:t.margin},r.a.createElement(Re.a,{htmlFor:"standard-adornment-amount"},"URL"),r.a.createElement(Ae.a,{id:"standard-adornment-url",value:d.url,onChange:w("url")})),r.a.createElement(Me.a,{fullWidth:!0,className:t.margin,id:"mqtt-clientId",label:"Client ID",value:d.clientId,onChange:w("clientId")}),r.a.createElement(Qe.a,{fullWidth:!0,className:t.margin},r.a.createElement(g.a,{control:r.a.createElement(f.a,{checked:d.anomynous,onChange:w("anomynous"),name:"anomynous",color:"primary"}),label:"Anomynous"})),d.anomynous?null:j),r.a.createElement(Ie.a,null,r.a.createElement(Ne.a,{onClick:y,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:function(){v({type:"disconnect"})},color:"primary"},"Disconnect"),r.a.createElement(Ne.a,{onClick:function(){v({type:"connect",setting:d})},color:"primary"},"Connect")))}var Ze=a(409),$e=Object(i.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},slider:{width:"100px",marginLeft:e.spacing(2)}}}));function Xe(e){var t=$e(),a=e.open,n=e.onChange,c=r.a.useContext(C),o=Object(l.a)(c,2),i=o[0],s=o[1],u=r.a.useContext(O),m=Object(l.a)(u,2),p=(m[0],m[1]),d=function(){n(!1)},b=function(e){return function(t,a){s(Object(qe.a)({},i,{subscribeTo:Object(qe.a)({},i.subscribeTo,Object(De.a)({},e,"undefined"===typeof a?t.target.value:a))}))}};return r.a.createElement(We.a,{fullWidth:!0,open:a,onClose:d,"aria-labelledby":"subscribe-dialog-title"},r.a.createElement(Be.a,{id:"subscribe-dialog-title"},"Subscribe"),r.a.createElement(Fe.a,null,r.a.createElement(Le.a,null,"Subscribe to a MQTT topic."),r.a.createElement(Me.a,{autoFocus:!0,id:"topic",label:"Topic",type:"text",fullWidth:!0,className:t.margin,onChange:b("topic"),value:i.subscribeTo.topic}),r.a.createElement(g.a,{control:r.a.createElement(Ze.a,{defaultValue:i.subscribeTo.qos,min:0,max:2,"aria-labelledby":"discrete-slider-always",step:1,marks:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"}],valueLabelDisplay:"off",className:t.slider,onChange:b("qos")}),label:"Qos",labelPlacement:"start",className:t.margin})),r.a.createElement(Ie.a,null,r.a.createElement(Ne.a,{onClick:d,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:function(){p({type:"unsubscribe",dispatch:p})},color:"primary"},"Unsubscribe"),r.a.createElement(Ne.a,{onClick:function(){p({type:"subscribe",setting:i,dispatch:p})},color:"primary"},"Subscribe")))}function Ye(e){var t=e.open,a=e.onChange;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{open:t.openConnectDialog,onChange:a.setOpenConnectDialog}),r.a.createElement(Xe,{open:t.openSubscribeDialog,onChange:a.setOpenSubscribeDialog}))}var _e=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=r.a.useState(!1),m=Object(l.a)(u,2),p=m[0],d=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{hidden:a,onChange:n}),r.a.createElement(le,null),r.a.createElement(ke,{hidden:a,onConnectClick:s,onSubscribeClick:d}),r.a.createElement(Pe,null),r.a.createElement(Ye,{open:{openConnectDialog:i,openSubscribeDialog:p},onChange:{setOpenConnectDialog:s,setOpenSubscribeDialog:d}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var et=a(73),tt=a.n(et),at=(a(325),"mwc".endsWith("-")?"mwc":"mwc-");function nt(e){var t=e.children,a=function(e,t){var a=at+e,r=Object(n.useState)((function(){var e=localStorage.getItem(a);return null!=e?JSON.parse(e):"function"===typeof t?t():t})),c=Object(l.a)(r,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(o))}),[a,o]),[o,i]}("mqttSetting",{url:"https:"===window.location.protocol?"wss://":"ws://",clientId:"mqtt-ws-client-".concat(Date.now().toString(36)),anomynous:!1,username:"",password:"",topic:["",0],subscribeTo:{topic:"",qos:0}}),c=Object(l.a)(a,2),o=c[0],i=c[1];return r.a.createElement(C.Provider,{value:[o,i]},t)}var rt="init",ct="connect",ot="subscribe",lt="subscribed",it="unsubscribe",st="unsubscribed",ut="disconnect",mt="onConnect",pt="onReconnect",dt="onClose",bt="onOffline",gt="onError",ft="onMessage",ht="updateStatus",Et="updateMessages",vt=[{messages:[]}],Ct=null,Ot=function(e,t){switch(t.type){case ft:var a=vt.length-1;return vt[a].messages.push({topic:t.topic,message:t.message.toString(),qos:t.packet.qos,retain:t.packet.retain,dup:t.packet.dup,time:Date.now()}),Ct||(Ct=setTimeout((function(){return e.dispatch({type:Et})}),e.updateInterval)),e;case Et:vt.push({messages:[]}),Ct=null;var n=vt[0].messages;return vt.shift(),Object(qe.a)({},e,{messages:[].concat(Object(k.a)(e.messages),Object(k.a)(n)),messagesCount:e.messagesCount+n.length});case ot:if(!e.subscribedTo.topic){var r=Object(De.a)({},t.setting.subscribeTo.topic,{qos:t.setting.subscribeTo.qos});e.mqtt.subscribe(r,(function(t,a){!t&&a[0].qos<=2&&e.dispatch({type:lt,granted:a[0]})}))}return e;case lt:return Object(qe.a)({},e,{subscribedTo:t.granted});case rt:return Object(qe.a)({},e,{dispatch:t.dispatch});case ct:e.mqtt&&e.mqtt.connected&&e.mqtt.end();var c=t.setting;try{var o=tt.a.connect(c.url,Object(qe.a)({},c,{username:c.anonymous?void 0:c.username,password:c.anonymous?void 0:c.password,reconnectPeriod:0}));return o.on("connect",(function(){return e.dispatch({type:mt,status:"connected"})})),o.on("reconnect",(function(){return e.dispatch({type:pt,status:"reconnecting"})})),o.on("close",(function(){return e.dispatch({type:dt,status:"closed"})})),o.on("offline",(function(){return e.dispatch({type:bt,status:"offline"})})),o.on("error",(function(t){return e.dispatch({type:gt,error:t})})),o.on("message",(function(a,n,r){return e.dispatch({type:ft,topic:a,message:n,packet:r,dispatch:t.dispatch})})),e.setAlert(["info","Connecting..."]),Object(qe.a)({},e,{mqtt:o})}catch(l){return e.setAlert(["error",l]),e}case ut:return e.mqtt&&e.mqtt.connected&&e.mqtt.end(),e.dispatch({type:st}),e;case it:return e.subscribedTo.topic&&e.mqtt.unsubscribe(e.subscribedTo.topic,(function(t){t||e.dispatch({type:st})})),e;case st:return Object(qe.a)({},e,{subscribedTo:{topic:"",qos:0}});case gt:return console.log(t.error),Object(qe.a)({},e,{error:t.error});case ht:case mt:case pt:case dt:case bt:return Object(qe.a)({},e,{status:t.status});default:return e}};function yt(e){var t=e.children,a=r.a.useContext(y),n=Object(l.a)(a,2),c=(n[0],n[1]),o=r.a.useReducer(Ot,{dispatch:null,updateInterval:100,mqtt:null,status:"offline",subscribedTo:{topic:"",qos:0},messages:[],messagesCount:0,setAlert:c}),i=Object(l.a)(o,2),s=i[0],u=i[1];return r.a.useEffect((function(){return u({type:rt,dispatch:u}),function(){tt.a&&tt.a.connected&&s.mqtt.end()}}),[tt.a]),r.a.createElement(O.Provider,{value:[s,u]},t)}function wt(e){var t=e.children,a=r.a.useState(["error","test error"]),n=Object(l.a)(a,2),c=n[0],o=n[1];return r.a.createElement(y.Provider,{value:[c,o]},t)}var jt=a(176),St=a(177),kt=a(178),xt=a(179),Tt=function(e){Object(xt.a)(a,e);var t=Object(kt.a)(a);function a(e){var n;return Object(jt.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(St.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(r.a.Component);function Pt(e){var t=e.children;return r.a.createElement(Tt,null,r.a.createElement(wt,null,r.a.createElement(nt,null,r.a.createElement(yt,null,t))))}o.a.render(r.a.createElement(Pt,null,r.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[208,1,2]]]);
//# sourceMappingURL=main.98c07db8.chunk.js.map