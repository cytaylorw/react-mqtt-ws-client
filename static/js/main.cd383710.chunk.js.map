{"version":3,"sources":["lib/i18n/zhTW.js","lib/i18n/enUS.js","serviceWorker.js","hooks/useLocalStorage.js","hooks/context/MqttSettingProvider.js","hooks/context/MqttProvider.js","hooks/context/AppSettingProvider.js","hooks/context/AlertProvider.js","errorBoundary/ErrorBoundary.js","components/themes/AppThemeProvider.js","hooks/AppContextProvider.js","index.js","lib/converter/MessageConverter.js","hooks/context/Contexts.js"],"names":["exports","zhTW","props","MuiBreadcrumbs","expandText","MuiTablePagination","backIconButtonText","labelRowsPerPage","labelDisplayedRows","from","to","count","nextIconButtonText","MuiRating","getLabelText","value","emptyLabelText","MuiAutocomplete","clearText","closeText","loadingText","noOptionsText","openText","MuiAlert","MuiPagination","getItemAriaLabel","type","page","selected","text","MuiMqttCommon","connect","disconnect","subscribe","unsubscribe","publish","MuiConfigActions","settings","enUS","Boolean","window","location","hostname","match","PREFIX","process","endsWith","useLocalStorage","key","initialValue","prefixedKey","useState","jsonValue","localStorage","getItem","JSON","parse","setValue","useEffect","setItem","stringify","MqttSettingProvider","children","url","protocol","clientId","Date","now","toString","anomynous","username","password","topic","subscribeTo","qos","converter","publishTo","locale","mqttSetting","setMqttSetting","Provider","ACTIONS","messageBuffer","messages","timeoutHandle","connectTimeout","mqttReducer","state","action","last","length","push","messageConverter","subscribedTo","pause","setTimeout","dispatch","updateInterval","newMessages","shift","messagesCount","mqtt","connected","end","setting","instance","anonymous","undefined","reconnectPeriod","on","status","error","message","packet","setAlert","console","log","granted","clearAlert","clearTimeout","MqttProvider","React","useContext","AlertContext","useReducer","userLang","navigator","language","userLanguage","split","join","AppSettingProvider","filter","time","appSetting","setAppSetting","AlertProvider","alert","timeout","ErrorBoundary","hasError","errorInfo","this","style","margin","Component","moment","supportLocales","Object","keys","locales","defaultTheme","createMuiTheme","typography","fontFamily","AppThemeProvider","AppSettingContext","theme","defaultLocales","i18n","component","defaultText","ThemeProvider","utils","MomentUtils","substring","AppContextProvider","App","lazy","ReactDOM","render","fallback","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","defaultShort","data","columns","default","collpasedColumns","defaultFull","cmd","retain","dup","types","label","createContext","MqttSettingContext","MqttContext"],"mappings":"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","file":"static/js/main.cd383710.chunk.js","sourcesContent":["exports.zhTW = {\r\n    props: {\r\n      MuiBreadcrumbs: {\r\n        expandText: '顯示路徑',\r\n      },\r\n      MuiTablePagination: {\r\n        backIconButtonText: '上一頁',\r\n        labelRowsPerPage: '每頁筆數：',\r\n        labelDisplayedRows: ({ from, to, count }) =>\r\n    `${from}-${to}  共${count !== -1 ? count : `大於 ${to}`}`,\r\n        nextIconButtonText: '下一頁',\r\n      },\r\n      MuiRating: {\r\n        getLabelText: value => `${value}星`,\r\n        emptyLabelText: '無',\r\n      },\r\n      MuiAutocomplete: {\r\n        clearText: '清除',\r\n        closeText: '關閉',\r\n        loadingText: '載入中…',\r\n        noOptionsText: '無選項',\r\n        openText: '開啟',\r\n      },\r\n      MuiAlert: {\r\n        closeText: '關閉',\r\n      },\r\n      MuiPagination: {\r\n        'aria-label': '分頁導覽',\r\n        getItemAriaLabel: (type, page, selected) => {\r\n          if (type === 'page') {\r\n            return `第${page}頁`;\r\n          }\r\n          if (type === 'first') {\r\n            return '第一頁';\r\n          }\r\n          if (type === 'last') {\r\n            return '最後一頁';\r\n          }\r\n          if (type === 'next') {\r\n            return '下一頁';\r\n          }\r\n          if (type === 'previous') {\r\n            return '上一頁';\r\n          }\r\n          return undefined;\r\n        },\r\n      },\r\n    },\r\n    text: {\r\n      MuiMqttCommon: {\r\n        connect: '連線',\r\n        disconnect: '中斷連線',\r\n        subscribe: '訂閱',\r\n        unsubscribe: '取消訂閱',\r\n        publish: '發布',\r\n      },\r\n      MuiConfigActions: {\r\n        settings: '設定'\r\n      }\r\n    }\r\n  };","exports.enUS = {\r\n    // text: {\r\n    //   MqttCommon: {\r\n    //     connect: 'Connect',\r\n    //     disconnect: 'Disconnect',\r\n    //     subscribe: 'Subscribe',\r\n    //     unsubscribe: 'Unsubscribe',\r\n    //     publish: 'Publish',\r\n    //   },\r\n    //   ConfigActions: {\r\n    //     settings: 'Settings'\r\n    //   },\r\n    //   MessageTable: {\r\n    //     rowsPerPage: 'rows per page'\r\n    //   }\r\n    // },\r\n\r\n  };","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { useState, useEffect} from 'react'\r\n\r\nconst PREFIX = process.env.REACT_APP_LOCAL_STORAGE_PREFIX.endsWith('-') ? \r\n                process.env.REACT_APP_LOCAL_STORAGE_PREFIX : \r\n                process.env.REACT_APP_LOCAL_STORAGE_PREFIX + '-';\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key;\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n\r\n        if(jsonValue != null) return JSON.parse(jsonValue)\r\n\r\n        return typeof initialValue === 'function' ? initialValue() : initialValue\r\n\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue]\r\n}\r\n","import React from 'react';\r\nimport os from 'os';\r\nimport useLocalStorage from 'hooks/useLocalStorage';\r\nimport { MqttSettingContext } from 'hooks/context/Contexts';\r\n\r\nexport default function MqttSettingProvider({ children }){\r\n\r\n  const [mqttSetting, setMqttSetting] = useLocalStorage('mqttSetting', {\r\n    url: window.location.protocol === 'https:' ? 'wss://' : 'ws://',\r\n    clientId: `mqtt-ws-client-${Date.now().toString(36)}`,\r\n    anomynous: false,\r\n    username: '',\r\n    password: '',\r\n    topic: ['', 0],\r\n    subscribeTo: {topic: '', qos: 0, converter: 'default'},\r\n    publishTo: {topic: '', qos: 0},\r\n    locale: 'zhTW'\r\n  })\r\n\r\n  return <MqttSettingContext.Provider value={[mqttSetting, setMqttSetting]}>{children}</MqttSettingContext.Provider>\r\n}","import React from 'react';\r\nimport mqtt from 'mqtt';\r\nimport MqttSettingProvider from 'hooks/context/MqttSettingProvider';\r\nimport { AlertContext,  MqttContext} from 'hooks/context/Contexts';\r\nimport { messageConverter } from 'lib/converter/MessageConverter';\r\n\r\nconst ACTIONS = {\r\n  INIT: 'init',\r\n  CONNECT: 'connect',\r\n  SUBSCRIBE: 'subscribe',\r\n  SUBSCRIBED: 'subscribed',\r\n  UNSUBSCRIBE: 'unsubscribe',\r\n  UNSUBSCRIBED: 'unsubscribed',\r\n  PUBLISH: 'publish',\r\n  DISCONNECT: 'disconnect',\r\n  ON_CONNECT: 'onConnect',\r\n  ON_RECONNECT: 'onReconnect',\r\n  ON_CLOSE: 'onClose',\r\n  ON_OFFLINE: 'onOffline',\r\n  ON_ERROR: 'onError',\r\n  ON_MESSAGE: 'onMessage',\r\n  UPDATE_STATUS: 'updateStatus',\r\n  UPDATE_MESSAGES: 'updateMessages',\r\n  TOGGLE_PAUSE: 'togglePause',\r\n}\r\n\r\nlet messageBuffer = [{messages: []}];\r\nlet timeoutHandle = null;\r\nlet connectTimeout = null;\r\n\r\nconst mqttReducer = (state, action) => {\r\n  switch(action.type){\r\n    case ACTIONS.ON_MESSAGE:\r\n      const last = messageBuffer.length - 1;\r\n      messageBuffer[last].messages.push(messageConverter[state.subscribedTo.converter](action));\r\n      if(!timeoutHandle && !state.pause){\r\n        timeoutHandle = setTimeout(() => state.dispatch({type: ACTIONS.UPDATE_MESSAGES}), state.updateInterval)\r\n      }\r\n      return state;\r\n    case ACTIONS.UPDATE_MESSAGES:\r\n      messageBuffer.push({messages: []});\r\n      timeoutHandle = null;\r\n      const newMessages = messageBuffer[0].messages;\r\n      messageBuffer.shift();\r\n      return {\r\n        ...state,\r\n        messages: [...state.messages, ...newMessages],\r\n        messagesCount: state.messagesCount+newMessages.length\r\n      };\r\n    case ACTIONS.INIT:\r\n      return {...state, dispatch: action.dispatch};\r\n    case ACTIONS.CONNECT:\r\n      // console.log(state.mqtt)\r\n      if(state.mqtt && state.mqtt.connected) state.mqtt.end();\r\n      const mqttSetting = action.setting;\r\n      // const brokerUrl = 'ws://' + mqttSetting.url;\r\n      try {        \r\n        const instance = mqtt.connect(mqttSetting.url, {\r\n          ...mqttSetting,\r\n          username: mqttSetting.anonymous ? undefined : mqttSetting.username,\r\n          password: mqttSetting.anonymous ? undefined : mqttSetting.password,\r\n          reconnectPeriod: 0\r\n        });\r\n        instance.on('connect', () => state.dispatch({type: ACTIONS.ON_CONNECT, status: 'connected'}));\r\n        instance.on('reconnect', () => state.dispatch({type: ACTIONS.ON_RECONNECT, status: 'reconnecting'}));\r\n        instance.on('close', () => state.dispatch({type: ACTIONS.ON_CLOSE, status: 'closed'}));\r\n        instance.on('offline', () => state.dispatch({type: ACTIONS.ON_OFFLINE, status: 'offline'}));\r\n        instance.on('error', (error) => state.dispatch({type: ACTIONS.ON_ERROR, error}));\r\n        instance.on('message', (topic, message, packet) => state.dispatch({type: ACTIONS.ON_MESSAGE, topic, message, packet}));\r\n        state.setAlert(['info', `Connecting to ${mqttSetting.url}...`])\r\n        connectTimeout = setTimeout(() => state.setAlert(['error', `Connection timeout.`]), 5000)\r\n        return {...state, mqtt:instance};\r\n      } catch (error) {\r\n        console.log(JSON.stringify(error))\r\n        state.setAlert(['error', error])\r\n        return state;\r\n      }\r\n    case ACTIONS.DISCONNECT:\r\n      state.setAlert(['info', `Disconnecting...`]);\r\n      if(state.mqtt && state.mqtt.connected) state.mqtt.end();\r\n      state.dispatch({type: ACTIONS.UNSUBSCRIBED});\r\n      return state;\r\n    case ACTIONS.SUBSCRIBE:\r\n      if(!state.subscribedTo.topic){\r\n        state.setAlert(['info', `Subscribing to ${state.subscribedTo.topic}...`]);\r\n        const topic = {[action.setting.subscribeTo.topic]: {qos: action.setting.subscribeTo.qos}};\r\n        state.mqtt.subscribe(topic, (error, granted) => {\r\n          if(error){\r\n            state.setAlert(['error', error]);\r\n          }else if(granted[0].qos > 2){\r\n            state.setAlert(['error', 'Failed to subscribe topic.']);\r\n          }else{\r\n            state.dispatch({type: ACTIONS.SUBSCRIBED, granted: {...granted[0], converter: action.setting.subscribeTo.converter}})\r\n          }\r\n          // if(!error && granted[0].qos <= 2) state.dispatch({type: ACTIONS.SUBSCRIBED, granted: granted[0]})\r\n        });\r\n      }\r\n      return state;\r\n    case ACTIONS.SUBSCRIBED:\r\n      // console.log(action.type);\r\n      state.clearAlert();\r\n      return {...state, subscribedTo: action.granted};\r\n    case ACTIONS.UNSUBSCRIBE:\r\n      if(state.subscribedTo.topic){\r\n        state.setAlert(['info', `Unsubscribing from ${state.subscribedTo.topic}...`]);\r\n        state.mqtt.unsubscribe(state.subscribedTo.topic, (error) => {\r\n          if(error){\r\n            state.setAlert(['error', error]);\r\n          }else{\r\n            state.dispatch({type: ACTIONS.UNSUBSCRIBED})\r\n          }\r\n          // if(!error) state.dispatch({type: ACTIONS.UNSUBSCRIBED});\r\n        });\r\n      }\r\n      return state;\r\n    case ACTIONS.UNSUBSCRIBED:\r\n      // clearTimeout(timeoutHandle);\r\n      // state.dispatch({type: ACTIONS.UPDATE_MESSAGES});\r\n      state.clearAlert();\r\n      return {...state, subscribedTo: {...state.subscribedTo, topic: '', qos: 0}};\r\n    case ACTIONS.PUBLISH:\r\n      // state.setAlert(['info', 'Publishing...']);\r\n      state.mqtt.publish(\r\n          action.setting.publishTo.topic, \r\n          action.setting.publishTo.message, \r\n          {qos: action.setting.publishTo.qos}, \r\n          (error) => {\r\n            if(error){\r\n              state.setAlert(['error', error]);\r\n            }else{\r\n              state.setAlert(['success', 'Published']);\r\n              state.clearAlert(1000);\r\n            }\r\n      })\r\n      return state;\r\n    case ACTIONS.ON_ERROR:\r\n      console.log(action.error);\r\n      return {...state, error: action.error};\r\n    case ACTIONS.UPDATE_STATUS:\r\n    case ACTIONS.ON_CONNECT:\r\n      state.clearAlert();\r\n      clearTimeout(connectTimeout);\r\n    case ACTIONS.ON_RECONNECT:\r\n    case ACTIONS.ON_CLOSE:\r\n    case ACTIONS.ON_OFFLINE:\r\n      // console.log(action.type)\r\n      // console.log(state.mqtt)\r\n      return {...state, status: action.status};\r\n      case ACTIONS.TOGGLE_PAUSE:\r\n      return {...state, pause: !state.pause};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport default function MqttProvider({ children }){\r\n  // const [mqttInstance, setMqttInstance] = React.useState(null);\r\n  // const [status, setStatus] = React.useState('offline');\r\n  const [alert, setAlert, clearAlert] = React.useContext(AlertContext);\r\n  \r\n  \r\n  const [state, dispatch] = React.useReducer(mqttReducer, {\r\n    dispatch: null,\r\n    updateInterval: 100,\r\n    mqtt: null,\r\n    status: 'offline',\r\n    subscribedTo: {topic: '', qos: 0},\r\n    messages: [],\r\n    messagesCount: 0,\r\n    setAlert,\r\n    clearAlert,\r\n    pause: false\r\n  })\r\n  \r\n  React.useEffect(() => {\r\n    dispatch({type: ACTIONS.INIT, dispatch});\r\n    return () => {\r\n      if(mqtt && mqtt.connected) state.mqtt.end();\r\n    }\r\n  }, [mqtt])\r\n  return (\r\n      <MqttContext.Provider value={[state, dispatch]}>{children}</MqttContext.Provider>\r\n  )\r\n}","import React from 'react';\r\nimport os from 'os';\r\nimport useLocalStorage from 'hooks/useLocalStorage';\r\nimport { AppSettingContext } from 'hooks/context/Contexts';\r\n\r\nconst userLang = (navigator.language || navigator.userLanguage).split('-').join(''); \r\n\r\nexport default function AppSettingProvider({ children }){\r\n\r\n  const [appSetting, setAppSetting] = useLocalStorage('appSetting', {\r\n    locale: userLang,\r\n    filter: {\r\n      time: [null,null],\r\n      text: ['','']\r\n    }\r\n  })\r\n\r\n  return <AppSettingContext.Provider value={[appSetting, setAppSetting]}>{children}</AppSettingContext.Provider>\r\n}","import React from 'react';\r\nimport { AlertContext } from 'hooks/context/Contexts';\r\n\r\nexport default function AlertProvider({ children }){\r\n\r\n  const [alert, setAlert] = React.useState([]);\r\n  const clearAlert = (timeout) => {\r\n    setTimeout(() => setAlert([]), timeout ? timeout : 100);\r\n  }\r\n\r\n  return <AlertContext.Provider value={[alert, setAlert, clearAlert]}>{children}</AlertContext.Provider>\r\n}","import React from 'react';\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { hasError: false };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      // 更新 state 以至於下一個 render 會顯示 fallback UI\r\n      return { hasError: true };\r\n    }\r\n  \r\n    componentDidCatch(error, errorInfo) {\r\n      // 你也可以把錯誤記錄到一個錯誤回報系統服務\r\n    //   logErrorToMyService(error, errorInfo);\r\n        console.log(error, errorInfo)\r\n    }\r\n  \r\n    render() {\r\n      if (this.state.hasError) {\r\n        // 你可以 render 任何客製化的 fallback UI\r\n        return <h1 style={{margin: 'auto'}}>Oops! Something went wrong</h1>;\r\n      }\r\n  \r\n      return this.props.children;\r\n    }\r\n  }","import React from 'react';\r\nimport * as defaultLocales from '@material-ui/core/locale';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport MomentUtils from '@date-io/moment';\r\nimport * as locales from 'lib/i18n';\r\nimport { AppSettingContext } from 'hooks/context/Contexts';\r\nimport moment from \"moment\";\r\nimport 'moment/locale/zh-tw';\r\n\r\nmoment.locale('en');\r\n\r\nconst supportLocales = Object.keys(locales);\r\n\r\nconst defaultTheme = createMuiTheme({\r\n    supportLocales,\r\n    typography: {\r\n      fontFamily: '\"Roboto\", \"Noto Sans TC\", \"Helvetica\", \"Arial\", sans-serif'\r\n    }\r\n});\r\n// defaultTheme.typography.fontFamily = 'Noto Sans TC\", ' + defaultTheme.typography.fontFamily;\r\n\r\nexport default function AppThemeProvider(props) {\r\n    const {\r\n        children,\r\n        // locale\r\n    } = props;\r\n    const [appSetting, setAppSetting] = React.useContext(AppSettingContext);\r\n    const theme = createMuiTheme(defaultTheme, {\r\n      ...defaultLocales[appSetting.locale], \r\n      ...locales[appSetting.locale],\r\n      i18n: function(component, key, defaultText){ \r\n        return this.text && this.text[component] && this.text[component][key] ? this.text[component][key] : defaultText[key]\r\n      }\r\n    });\r\n\r\n    return (\r\n      <ThemeProvider theme={theme}>\r\n        <MuiPickersUtilsProvider utils={MomentUtils} locale={`${appSetting.locale.substring(0, 2)}-${appSetting.locale.substring(2, 4)}`}>\r\n          {children}\r\n        </MuiPickersUtilsProvider>\r\n      </ThemeProvider>\r\n    );\r\n  }","import React from 'react'\r\nimport MqttProvider from 'hooks/context/MqttProvider';\r\nimport MqttSettingProvider from 'hooks/context/MqttSettingProvider';\r\nimport AppSettingProvider from 'hooks/context/AppSettingProvider';\r\nimport AlertProvider from 'hooks/context/AlertProvider';\r\nimport ErrorBoundary from 'errorBoundary/ErrorBoundary';\r\nimport AppThemeProvider from 'components/themes/AppThemeProvider';\r\n\r\nexport * from 'hooks/context/Contexts';\r\n\r\nexport default function AppContextProvider(props){\r\n    const {\r\n        children\r\n    } = props;\r\n    return (\r\n        <ErrorBoundary>\r\n            <AppSettingProvider>\r\n                <AppThemeProvider>\r\n                    <AlertProvider>\r\n                        <MqttSettingProvider>\r\n                            <MqttProvider>\r\n                                    { children }\r\n                            </MqttProvider>\r\n                        </MqttSettingProvider>\r\n                    </AlertProvider>\r\n                </AppThemeProvider>\r\n            </AppSettingProvider>\r\n        </ErrorBoundary>\r\n    )\r\n}","import React, { lazy, Suspense} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\n// import App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport AppContextProvider from 'hooks/AppContextProvider';\r\n\r\nconst App = lazy(() => import('./App'));\r\n\r\nReactDOM.render(\r\n  <AppContextProvider>\r\n    <Suspense fallback={<h3>Loading...</h3>}>\r\n      <App />\r\n    </Suspense>\r\n  </AppContextProvider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","\r\n\r\n\r\nconst defaultShort = (data) => {\r\n    return {\r\n        topic: data.topic, \r\n        message: data.message.toString(), \r\n        qos: data.packet.qos, \r\n        time: Date.now()\r\n    }\r\n}\r\nconst defaultFull = (data) => {\r\n    return {\r\n        ...defaultShort(data),\r\n        retain: data.packet.retain.toString(), \r\n        dup: data.packet.dup.toString(), \r\n        cmd: data.packet.cmd,\r\n    }\r\n}\r\n\r\nconst columns = {\r\n    default: {\r\n        time: 'Time',\r\n        topic: 'Topic',\r\n        qos: 'QoS',\r\n        message: 'Message'\r\n    }\r\n}\r\n\r\nconst collpasedColumns = {\r\n    defaultFull: {\r\n        cmd: 'Command',\r\n        retain: 'Retained',\r\n        dup: 'Duplicate',\r\n    }\r\n}\r\n\r\nconst messageConverter = {\r\n    default: defaultShort,\r\n    defaultFull\r\n}\r\n\r\nconst types = [\r\n    {value: 'default', label: 'Default'},\r\n    {value: 'defaultFull', label: 'Default(Full)'},\r\n    {value: 'test', label: 'test'},\r\n]\r\n\r\nexport { messageConverter, columns, collpasedColumns, types };","import React from 'react';\r\n\r\nexport const AppSettingContext = React.createContext(null);\r\nexport const MqttSettingContext = React.createContext(null);\r\nexport const MqttContext = React.createContext(null);\r\nexport const AlertContext = React.createContext(null);"],"sourceRoot":""}